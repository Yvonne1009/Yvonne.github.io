<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/fill in.css" />
    <link rel="icon" href="image/logo.ico" type="image/x-icon" />
    <title>LeisurePace_個人資料填寫</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js"></script>
  </head>
  <body class="page6">
    <form id="healthForm">
      <div class="column">
        <label for="name">姓名:</label>
        <input type="text" id="name" name="name" required />

        <label for="birthday">生日:</label>
        <input type="date" id="birthday" name="birthday" required />

        <label>性别:</label>
        <label><input type="radio" name="gender" value="male" /> 男性</label>
        <label><input type="radio" name="gender" value="female" /> 女性</label>
        <label><input type="radio" name="gender" value="other" /> 其他</label>

        <label for="height">身高 (cm):</label>
        <input type="number" id="height" name="height" required />

        <label for="weight">體重 (kg):</label>
        <input type="number" id="weight" name="weight" required />

        <label>運動频率:</label>
        <select name="exerciseFrequency">
          <option value="daily">每天運動</option>
          <option value="weekly">一週 0 - 1 次</option>
          <option value="occasionally">一週 2 - 3 次</option>
          <option value="occasionally">一週 4 - 6 次</option>
        </select>

        <label>運動目的:</label>
        <label
          ><input type="checkbox" name="exercisePurpose" value="stayhealthy" />
          保持健康</label
        >
        <label
          ><input
            type="checkbox"
            name="exercisePurpose"
            value="Relievestress"
          />
          舒壓</label
        >
        <label
          ><input type="checkbox" name="exercisePurpose" value="Cellulite" />
          消脂</label
        >

        <label
          ><input type="checkbox" name="exercisePurpose" value="Buildmuscle" />
          增肌</label
        >

        <label
          ><input type="checkbox" name="exercisePurpose" value="other" />
          其他</label
        >
      </div>
      <button type="submit">提交</button>
    </form>

    <script>
      // 初始化 Firebase 应用
      const app = firebase.initializeApp(firebaseConfig);

      // 初始化 Firestore
      const db = firebase.firestore(app);

      // 获取表单元素
      const healthForm = document.getElementById("healthForm");

      healthForm.addEventListener("submit", function (event) {
        event.preventDefault(); // 阻止表单提交的默认行为

        // 获取表单数据
        const formData = new FormData(healthForm);
        const dataObject = {};

        formData.forEach(function (value, key) {
          dataObject[key] = value;
        });

        console.log("表单数据:", dataObject);

        // 将表单数据保存到 Firestore 的 'users' 集合中
        db.collection("users")
          .add(dataObject)
          .then((docRef) => {
            console.log("文档写入 ID: ", docRef.id);
            alert("数据已成功保存！");
          })
          .catch((error) => {
            console.error("添加文档时出错: ", error);
            alert("保存数据时出错，请重试！");
          });
      });
    </script>
    <!-- Import the basic jquery lib. -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <!-- Import the associated firebase lib which the order is fixed. -->
    <script
      defer
      src="https://www.gstatic.com/firebasejs/8.0.1/firebase-app.js"
    ></script>
    <script
      defer
      src="https://www.gstatic.com/firebasejs/8.0.1/firebase-auth.js"
    ></script>
    <script
      defer
      src="https://www.gstatic.com/firebasejs/8.0.1/firebase-storage.js"
    ></script>
    <script
      defer
      src="https://www.gstatic.com/firebasejs/8.0.1/firebase-database.js"
    ></script>
    <!-- Set the firebsae config and initialize it. -->
    <script defer src="./js/init-firebase.js"></script>
  </body>
</html>

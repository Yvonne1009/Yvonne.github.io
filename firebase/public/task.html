<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="css/task.css" />
  <link rel="icon" href="image/logo.ico" type="image/x-icon" />
  <link rel="stylesheet" href="css/bootstrap.min.css" />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    integrity="sha384-kB+HoBWE0e8+eAxj0NwD3wGwQ52cMUlw1U5NDzYrUSrWrjvaLq63fhp5R2+OOQ4b" crossorigin="anonymous" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

  <title>LeisurePace_任務</title>
</head>

<body>
  <!-- menu 開始 -->
  <header id="masthead" class="site-header" role="banner">
    <nav class="navbar navbar-default navbar-static-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse"
            data-target=".navbar-ex1-collapse"></button>
          <a class="navbar-brand" href="index.html"> LeisurePace </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="index.html">首頁</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">關於LeisurePace <i
                  class="fa fa-angle-double-down"></i></a>
              <ul class="dropdown-menu">
                <li><a href="about.html">LeisurePace</a></li>
                <li><a href="about.html">超慢跑介紹</a></li>
              </ul>
            </li>
            <li class="dropdown">
              <a href="./run/run180.html">超慢跑 </a>
            </li>
            <li class="dropdown">
              <a href="analyze.html">分析</a>
            </li>
            <li class="dropdown active">
              <a href="task.html">任務 </a>
            </li>

            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                <img
                    id="profileImage"
                    src="./image/default-avatar.png"
                    class="profile-picture"
                    style="border-radius: 50%"
                  />
              </a>
              <ul class="dropdown-menu">
                <li><a href="bgstore.html">背景介紹</a></li>
                <li><a href="personal.html">個人資料</a></li>
                <li><a href="connect.html">聯絡我們</a></li>
                <li><a href="./login/login.html">登出</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </header>


<!---------------- 左側：月曆和待辦事項清單---------------->
<div class="container main-container">
  <div class="left-section">
    <!--月曆 -->
    <div class="calendar">
      <div class="calendar-header" id="header"></div>
      <div class="calendar-nav">
        <button onclick="prevMonth()">Prev Month</button>
        <select id="monthSelect" onchange="changeMonth()"></select>
        <select id="yearSelect" onchange="changeYear()"></select>
        <button onclick="nextMonth()">Next Month</button>
      </div>
      <div class="calendar-body" id="calendar"></div>
    </div>

    <!--待辦事項清單 -->
    <div class="todo-list">
      <h2 id="todoTitle">待辦事項清單</h2>
      <input type="text" id="taskInput" placeholder="新增待辦事項清單..." />
      <button onclick="addTask()">新增</button>
      <h2>待辦事項清單紀錄</h2>
      <div id="taskList">
      </div>
    </div>
  </div>

  <!----------------------右側：每日記錄 ---------------------->
  <div class="right-section">
    <div class="record-section">
      <h1>體重</h1>
      <div class="weight-record">
        <form id="weightForm">
          <label for="weightInput">輸入體重 (kg): </label>
          <input type="number" id="weightInput" placeholder="輸入體重 (kg)..." step="0.1" required />
          <button type="submit">新增</button>
        </form>
        <h2>體重記錄</h2>
        <div id="weightRecords"></div>
      </div>
    </div>

    <div class="record-section">
      <h1>喝水</h1>
      <div class="water-record">
        <form id="waterForm">
          <label for="waterInput">输入喝水量(ml): </label>
          <input type="number" id="waterInput" placeholder="输入喝水量(ml)..." step="1" required />
          <button type="submit">新增</button>
        </form>
        <h2>喝水記錄</h2>
        <div id="waterRecords"></div>
      </div>
    </div>

    <div class="record-section">
      <h1>步數</h1>
      <div class="step-record">
        <form id="stepForm">
          <label for="stepInput">输入步數(steps): </label>
          <input type="number" id="stepInput" placeholder="输入步數(steps)..." required />
          <button type="submit">新增</button>
        </form>
        <h2>步數記錄</h2>
        <div id="stepRecords"></div>
      </div>
    </div>

    <div class="record-section">
      <h1>超慢跑</h1>
      <div class="run-record">
        <form id="runForm">
          <label for="runInput">新增目標(分鐘): </label>
          <input type="text" id="runInput" placeholder="新增目標(分鐘)..." required />
          <button type="submit">新增</button>
        </form>
        <h2>超慢跑記錄</h2>
        <div id="runRecords"></div>
      </div>
    </div>
  </div>
</div>


<!--////////////////////////////////////////////以下JS///////////////////////////////////////////////////-->




<!-- ------------------------------------調整日歷JS-------------------------------------------- -->
<script>
  // 獲取日曆頭部元素和月份顯示區域元素
  const header = document.getElementById("header");
  const calendarContainer = document.getElementById("calendar");
  const monthSelect = document.getElementById("monthSelect");
  const yearSelect = document.getElementById("yearSelect");

  // 獲取當前日期信息
  let currentDate = new Date();
  let currentYear = currentDate.getFullYear();
  let currentMonth = currentDate.getMonth() + 1; // 將月份索引+1
  let currentDay = currentDate.getDate();
  let selectedDayElement = null; // 用來存儲當前選中的日期元素

  // 初始化月份選擇框
  for (let i = 1; i <= 12; i++) {
    const option = document.createElement("option");
    option.value = i;
    option.text = new Date(0, i - 1).toLocaleString("en", {
      month: "long",
    });
    monthSelect.appendChild(option);
  }
  monthSelect.selectedIndex = currentMonth - 1;

  // 初始化年份選擇框
  for (let i = currentYear - 10; i <= currentYear + 10; i++) {
    const option = document.createElement("option");
    option.value = i;
    option.text = i;
    yearSelect.appendChild(option);
  }
  yearSelect.selectedIndex = 10;

  // 函數：生成月份選擇器
  function generateMonthSelector() {
    monthSelect.selectedIndex = currentMonth - 1;
  }

  // 函數：生成日曆
  function generateCalendar(year, month) {
    const daysInMonth = new Date(year, month, 0).getDate();
    const firstDay = new Date(year, month - 1, 1).getDay();
    const weekdays = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

    // 清空日曆容器
    calendarContainer.innerHTML = "";

    // 添加星期標題
    for (let i = 0; i < 7; i++) {
      const weekday = document.createElement("div");
      weekday.classList.add("calendar-day");
      weekday.textContent = weekdays[i];
      calendarContainer.appendChild(weekday);
    }

    // 添加空白日期
    for (let i = 0; i < firstDay; i++) {
      const emptyDay = document.createElement("div");
      emptyDay.classList.add("calendar-day");
      emptyDay.textContent = "";
      calendarContainer.appendChild(emptyDay);
    }

    // 添加日期
    for (let i = 1; i <= daysInMonth; i++) {
      const day = document.createElement("div");
      day.classList.add("calendar-day");
      day.textContent = i;
      day.setAttribute("data-day", i);

      // 点击日期时更新记录
      day.addEventListener("click", () => {
        // 更新当前日期
        currentYear = year;
        currentMonth = month;
        currentDay = i;

        // 清除之前选中的日期颜色
        if (selectedDayElement) {
          selectedDayElement.classList.remove("selected");
        }

        // 将选中日期设为红色
        day.classList.add("selected");
        selectedDayElement = day;

        updateHeader(currentYear, currentMonth, currentDay); // 更新标题
        getTasksFromFirebase(); // 重新从 Firebase 获取任务列表并显示
        getWeightFromFirebase(); // 更新体重记录
        getWaterFromFirebase(); // 更新喝水记录
        getStepsFromFirebase(); // 更新步数记录
        getRunFromFirebase(); // 更新超慢跑记录
      });


      // 如果是今天的日期，則添加紅色背景
      if (
        year === currentYear &&
        month === currentMonth &&
        i === currentDay
      ) {
        day.classList.add("today");
      }
      calendarContainer.appendChild(day);
    }
  }

  // 當月份選擇變更時的處理函數
  function changeMonth() {
    currentMonth = parseInt(monthSelect.value); // 讀取新的月份
    generateCalendar(currentYear, currentMonth); // 重新生成日曆
    getTasksFromFirebase(); // 更新當前月份的任務列表
  }

  // 當年份選擇變更時的處理函數
  function changeYear() {
    currentYear = parseInt(yearSelect.value); // 讀取新的年份
    generateCalendar(currentYear, currentMonth); // 重新生成日曆
    getTasksFromFirebase(); // 更新當前年份的任務列表
  }

  // 當選擇月份或年份時，自動生成對應的日曆
  monthSelect.addEventListener("change", changeMonth);
  yearSelect.addEventListener("change", changeYear);


  // 函数：更新标题显示选定的年份、月份和日期
  function updateHeader(year, month, day) {
    header.innerText = `${year}年${month}月${day}日`; // 不再 +1
  }

  // 函数：显示前一个月份
  function prevMonth() {
    if (currentMonth === 1) {
      currentYear--;
      currentMonth = 12;
    } else {
      currentMonth--;
    }
    yearSelect.value = currentYear; // 更新年份選擇框
    monthSelect.value = currentMonth; // 更新月份選擇框
    generateCalendar(currentYear, currentMonth);
    getTasksFromFirebase();
  }

  // 函数：显示下一个月份
  function nextMonth() {
    if (currentMonth === 12) {
      currentYear++;
      currentMonth = 1;
    } else {
      currentMonth++;
    }
    yearSelect.value = currentYear; // 更新年份選擇框
    monthSelect.value = currentMonth; // 更新月份選擇框
    generateCalendar(currentYear, currentMonth);
    getTasksFromFirebase();
  }

  // 绑定月份和年份选择器的事件
  monthSelect.addEventListener("change", () => {
    currentMonth = parseInt(monthSelect.value);
    generateCalendar(currentYear, currentMonth);
    getTasksFromFirebase();
  });

  yearSelect.addEventListener("change", () => {
    currentYear = parseInt(yearSelect.value);
    generateCalendar(currentYear, currentMonth);
    getTasksFromFirebase();
  });
</script>


 <!-- 初始化 Firebase -->
 <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-app.js"></script>
 <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-auth.js"></script>
 <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-firestore.js"></script>
<!-- -------------------------------------------Firebase 配置-------------------------------------------------- -->
<script>
  // 初始化 Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyCbujMaNQH4-KIuNbSglH2SriVqvvRRa1g",
    authDomain: "leisurepace-a3d51.firebaseapp.com",
    projectId: "leisurepace-a3d51",
    storageBucket: "leisurepace-a3d51.appspot.com",
    messagingSenderId: "955257567601",
    appId: "1:955257567601:web:2e06661d84707065fe9ed0"
  };

  firebase.initializeApp(firebaseConfig);

  // 初始化 Firebase Auth 和 Firestore
  const auth = firebase.auth();
  const db = firebase.firestore();

  // 監聽使用者狀態變更
  auth.onAuthStateChanged(user => {
    if (user) {
      console.log("使用者已登入: ", user.email);
      getTasks(); // 取得任務清單
      // 你也可以在這裡加入其他資料獲取邏輯，如體重、喝水、步數等
      getWeightRecords();
      getWaterRecords();
      getStepRecords();
      getRunRecords();
    } else {
      console.log("使用者已登出或尚未登入");
      window.location.href = './login/login.html'; // 導向登入頁面
    }
  });
</script>



<!-- -------------------------------------------待辦事項清單JS-------------------------------------------------- -->
<script>
 function addTask() {
  const taskText = document.getElementById("taskInput").value.trim();
  if (taskText === "") return;

  const user = auth.currentUser;
  if (user) {
    // 將日期格式化為子集合名稱，例如 "2024-10-15"
    const taskDate = `${currentYear}-${currentMonth}-${currentDay}`;
    
    const taskData = {
      task: taskText,
      date: new Date().toISOString(),
      year: currentYear,
      month: currentMonth,
      day: currentDay,
    };

    // 在特定日期的文檔中添加任務作為字段
    db.collection("users").doc(user.uid).collection("Records").doc(taskDate).set({
      task: taskText,
    }, { merge: true })  // 使用 merge 避免覆蓋其他字段
    .then(() => {
      console.log("任務已新增");
      document.getElementById("taskInput").value = "";
      getTasks(); // 新增後重新獲取任務
    });
  } else {
    console.error("未找到登入使用者");
  }
}


function getTasks() {
  const user = auth.currentUser;
  if (user) {
    const taskDate = `${currentYear}-${currentMonth}-${currentDay}`;

    // 獲取特定日期的任務（直接從日期文檔中獲取）
    db.collection("users").doc(user.uid).collection("Records").doc(taskDate)
      .get()
      .then((doc) => {
        if (doc.exists) {
          const data = doc.data();
          const tasks = data.task ? [data.task] : []; // 任務以字段形式存儲
          displayTasks(currentYear, currentMonth, currentDay, tasks);
        } else {
          console.log("當天無任務");
          displayTasks(currentYear, currentMonth, currentDay, []);
        }
      });
  }
}



function displayTasks(year, month, day, tasks) {
  const taskList = document.getElementById("taskList");
  taskList.innerHTML = "";

  tasks.forEach((task) => {
    const taskElement = document.createElement("div");
    taskElement.classList.add("task");

    // 顯示日期
    const taskDate = document.createElement("span");
    taskDate.textContent = `(${year}/${month}/${day}) `;

    // 顯示輸入的任務內容
    const taskText = document.createElement("span");
    taskText.textContent = task;

    const deleteButton = document.createElement("button");
    deleteButton.textContent = "刪除";
    deleteButton.addEventListener("click", () => deleteTask({ task, year, month, day }));

    taskElement.appendChild(taskDate);  // 顯示日期
    taskElement.appendChild(taskText);  // 顯示任務
    taskElement.appendChild(deleteButton);  // 顯示刪除按鈕

    taskList.appendChild(taskElement);
  });
}


function deleteTask(task) {
  const user = auth.currentUser;
  if (user) {
    // 以日期作為文檔名稱
    const taskDate = `${task.year}-${task.month}-${task.day}`;
    
    // 刪除該日期文檔中的 task 字段
    db.collection("users").doc(user.uid).collection("Records").doc(taskDate)
      .update({
        task: firebase.firestore.FieldValue.delete()
      })
      .then(() => {
        console.log("任務已刪除");
        getTasks(); // 刪除後重新獲取任務
      });
  }
}



  // 初始化日曆
  generateCalendar(currentYear, currentMonth);
  updateHeader(currentYear, currentMonth, currentDate.getDate());
  getTasks();
</script>





<!-- ---------------------------以下體重、喝水、步數、超慢跑紀錄JS------------------------------------ -->
<script>
  // 获取 DOM 元素
  const weightForm = document.getElementById("weightForm");
  const weightInput = document.getElementById("weightInput");
  const weightRecords = document.getElementById("weightRecords");

  const waterForm = document.getElementById("waterForm");
  const waterInput = document.getElementById("waterInput");
  const waterRecords = document.getElementById("waterRecords");

  const stepForm = document.getElementById("stepForm");
  const stepInput = document.getElementById("stepInput");
  const stepRecords = document.getElementById("stepRecords");

  const runForm = document.getElementById("runForm");
  const runInput = document.getElementById("runInput");
  const runRecords = document.getElementById("runRecords");


  // 更新当前选择的日期（可以根据您的日期选择器更新）
  function updateSelectedDate(year, month, day) {
    currentYear = year;
    currentMonth = month;
    currentDay = day;
  }

  // 在输入体重时记录选定日期
  weightForm.addEventListener("submit", function (event) {
    event.preventDefault();

    const weightAmount = parseFloat(weightInput.value);
    if (isNaN(weightAmount)) return;

    const weightEntry = {
      amount: weightAmount,
      year: currentYear,
      month: currentMonth,
      day: currentDay,
    };

    addWeightToFirebase(weightEntry);
    weightInput.value = "";
  });

  // 将体重记录添加到 Firebase
  function addWeightToFirebase(weightEntry) {
    database
      .ref("weight")
      .push(weightEntry)
      .then(() => {
        console.log("Weight entry added to Firebase database successfully!");
        getWeightFromFirebase();
      })
      .catch((error) => {
        console.error("Error adding weight entry to Firebase database: ", error);
      });
  }

  // 从 Firebase 获取体重记录
  function getWeightFromFirebase() {
    database
      .ref("weight")
      .once("value")
      .then(function (snapshot) {
        const weights = snapshot.val();
        displayWeight(weights); // 直接显示当前日期的体重记录
      })
      .catch(function (error) {
        console.error("The read failed: " + error.code);
      });
  }

  // 显示体重记录
  function displayWeight(weights) {
    weightRecords.innerHTML = "";

    if (weights) {
      const weightEntries = Object.entries(weights).filter(([id, entry]) => {
        return entry.year === currentYear && entry.month === currentMonth && entry.day === currentDay;
      });

      weightEntries.forEach(([id, entry]) => {
        const weightElement = document.createElement("div");
        weightElement.classList.add("record-entry");
        weightElement.innerHTML = `
              <span class="weight-date">${entry.year}-${entry.month}-${entry.day}:</span>
              <span class="weight-value">${entry.amount} kg</span>
              <button onclick="deleteWeight('${id}')">刪除</button>
          `;
        weightRecords.appendChild(weightElement);
      });
    }
  }

  // 删除体重记录
  function deleteWeight(id) {
    database
      .ref("weight")
      .child(id)
      .remove()
      .then(() => {
        console.log("Weight entry removed from Firebase database successfully!");
        getWeightFromFirebase();
      })
      .catch((error) => {
        console.error("Error removing weight entry from Firebase database: ", error);
      });
  }

  // 页面加载时获取体重记录
  window.addEventListener("load", function () {
    getWeightFromFirebase();
  });

  // 记录喝水量
  waterForm.addEventListener("submit", function (event) {
    event.preventDefault();

    const waterAmount = parseFloat(waterInput.value);
    if (isNaN(waterAmount)) return;

    const waterEntry = {
      amount: waterAmount,
      year: currentYear,
      month: currentMonth,
      day: currentDay,
    };

    addWaterToFirebase(waterEntry);
    waterInput.value = "";
  });

  // 将喝水记录添加到 Firebase
  function addWaterToFirebase(waterEntry) {
    database
      .ref("water")
      .push(waterEntry)
      .then(() => {
        console.log("Water entry added to Firebase database successfully!");
        getWaterFromFirebase();
      })
      .catch((error) => {
        console.error("Error adding water entry to Firebase database: ", error);
      });
  }

  // 从 Firebase 获取喝水记录
  function getWaterFromFirebase() {
    database
      .ref("water")
      .once("value")
      .then(function (snapshot) {
        const waters = snapshot.val();
        displayWater(waters); // 直接显示当前日期的喝水记录
      })
      .catch(function (error) {
        console.error("The read failed: " + error.code);
      });
  }

  // 显示喝水记录
  function displayWater(waters) {
    waterRecords.innerHTML = "";

    if (waters) {
      const waterEntries = Object.entries(waters).filter(([id, entry]) => {
        return entry.year === currentYear && entry.month === currentMonth && entry.day === currentDay;
      });

      waterEntries.forEach(([id, entry]) => {
        const waterElement = document.createElement("div");
        waterElement.classList.add("record-entry");
        waterElement.innerHTML = `
              <span class="water-date">${entry.year}-${entry.month}-${entry.day}:</span>
              <span class="water-value">${entry.amount} ml</span>
              <button onclick="deleteWater('${id}')">刪除</button>
          `;
        waterRecords.appendChild(waterElement);
      });
    }
  }

  // 删除喝水记录
  function deleteWater(id) {
    database
      .ref("water")
      .child(id)
      .remove()
      .then(() => {
        console.log("Water entry removed from Firebase database successfully!");
        getWaterFromFirebase();
      })
      .catch((error) => {
        console.error("Error removing water entry from Firebase database: ", error);
      });
  }

  // 页面加载时获取喝水记录
  window.addEventListener("load", function () {
    getWaterFromFirebase();
  });

  // 记录步数
  stepForm.addEventListener("submit", function (event) {
    event.preventDefault();

    const stepAmount = parseInt(stepInput.value);
    if (isNaN(stepAmount)) return;

    const stepEntry = {
      amount: stepAmount,
      year: currentYear,
      month: currentMonth,
      day: currentDay,
    };

    addStepToFirebase(stepEntry);
    stepInput.value = "";
  });

  // 将步数记录添加到 Firebase
  function addStepToFirebase(stepEntry) {
    database
      .ref("steps")
      .push(stepEntry)
      .then(() => {
        console.log("Step entry added to Firebase database successfully!");
        getStepsFromFirebase();
      })
      .catch((error) => {
        console.error("Error adding step entry to Firebase database: ", error);
      });
  }

  // 从 Firebase 获取步数记录
  function getStepsFromFirebase() {
    database
      .ref("steps")
      .once("value")
      .then(function (snapshot) {
        const steps = snapshot.val();
        displaySteps(steps); // 直接显示当前日期的步数记录
      })
      .catch(function (error) {
        console.error("The read failed: " + error.code);
      });
  }

  // 显示步数记录
  function displaySteps(steps) {
    stepRecords.innerHTML = "";

    if (steps) {
      const stepEntries = Object.entries(steps).filter(([id, entry]) => {
        return entry.year === currentYear && entry.month === currentMonth && entry.day === currentDay;
      });

      stepEntries.forEach(([id, entry]) => {
        const stepElement = document.createElement("div");
        stepElement.classList.add("record-entry");
        stepElement.innerHTML = `
              <span class="step-date">${entry.year}-${entry.month}-${entry.day}:</span>
              <span class="step-value">${entry.amount} steps</span>
              <button onclick="deleteStep('${id}')">刪除</button>
          `;
        stepRecords.appendChild(stepElement);
      });
    }
  }


  // 删除步数记录
  function deleteStep(id) {
    database
      .ref("steps")
      .child(id)
      .remove()
      .then(() => {
        console.log("Step entry removed from Firebase database successfully!");
        getStepsFromFirebase();
      })
      .catch((error) => {
        console.error("Error removing step entry from Firebase database: ", error);
      });
  }

  // 页面加载时获取步数记录
  window.addEventListener("load", function () {
    getStepsFromFirebase();
  });

  // 记录超慢跑目标
  runForm.addEventListener("submit", function (event) {
    event.preventDefault();

    const runGoal = runInput.value.trim();
    if (!runGoal) return;

    const runEntry = {
      goal: runGoal,
      year: currentYear,
      month: currentMonth,
      day: currentDay,
    };

    addRunToFirebase(runEntry);
    runInput.value = "";
  });

  // 将超慢跑记录添加到 Firebase
  function addRunToFirebase(runEntry) {
    database
      .ref("run")
      .push(runEntry)
      .then(() => {
        console.log("Run entry added to Firebase database successfully!");
        getRunFromFirebase();
      })
      .catch((error) => {
        console.error("Error adding run entry to Firebase database: ", error);
      });
  }

  // 从 Firebase 获取超慢跑记录
  function getRunFromFirebase() {
    database
      .ref("run")
      .once("value")
      .then(function (snapshot) {
        const runs = snapshot.val();
        displayRun(runs); // 直接显示当前日期的跑步记录
      })
      .catch(function (error) {
        console.error("The read failed: " + error.code);
      });
  }

  // 显示超慢跑记录
  function displayRun(runs) {
    runRecords.innerHTML = "";

    if (runs) {
      const runEntries = Object.entries(runs).filter(([id, entry]) => {
        return entry.year === currentYear && entry.month === currentMonth && entry.day === currentDay;
      });

      runEntries.forEach(([id, entry]) => {
        const runElement = document.createElement("div");
        runElement.classList.add("record-entry");
        runElement.innerHTML = `
              <span class="run-date">${entry.year}-${entry.month}-${entry.day}:</span>
              <span class="run-goal">${entry.goal}</span>
              <button onclick="deleteRun('${id}')">刪除</button>
          `;
        runRecords.appendChild(runElement);
      });
    }
  }


  // 删除超慢跑记录
  function deleteRun(id) {
    database
      .ref("run")
      .child(id)
      .remove()
      .then(() => {
        console.log("Run entry removed from Firebase database successfully!");
        getRunFromFirebase();
      })
      .catch((error) => {
        console.error("Error removing run entry from Firebase database: ", error);
      });
  }

  // 页面加载时获取超慢跑记录
  window.addEventListener("load", function () {
    getRunFromFirebase();
  });

</script>
  <!------------------------------------下半部 footer 開始 --------------------------------------------------------->
  <footer id="footer" class="footer-area">
    <div class="footer-widget pt-80">
      <div class="container">
        <div class="row">
          <div class="col-lg-3 col-md-4 col-sm-8">
            <div class="footer-logo mt-50">
              <a href="#">
                <img src="image/logo.png" alt="Logo" />
              </a>

              <ul class="footer-social mt-20">
                <li>
                  <a href="#"><i class="lni-facebook-filled"></i></a>
                </li>
                <li>
                  <a href="#"><i class="lni-twitter-original"></i></a>
                </li>
                <li>
                  <a href="#"><i class="lni-google"></i></a>
                </li>
                <li>
                  <a href="#"><i class="lni-instagram"></i></a>
                </li>
              </ul>
            </div>
            <!-- footer logo -->
          </div>
          <div class="col-lg-3 col-md-4 col-sm-6">
            <div class="footer-link mt-45">
              <div class="f-title">
                <h4 class="title">關於LeisurePace</h4>
              </div>
              <ul class="mt-15">
                <li><a href="about.html">LeisurePace</a></li>
                <li><a href="about.html">超慢跑介紹</a></li>
              </ul>
            </div>
          </div>
          <div class="col-lg-3 col-md-4 col-sm-6">
            <div class="footer-link mt-45">
              <ul class="mt-15">
                <li><a href="./run/run180.html">超慢跑</a></li>
                <li><a href="analyze.html">分析</a></li>
                <li><a href="task.html">任務</a></li>
              </ul>
            </div>
          </div>
          <div class="col-lg-3 col-md-4 col-sm-6">
            <div class="footer-link mt-45">
              <ul class="mt-15">
                <li><a href="bgstore.html">背景介紹</a></li>
                <li><a href="personal.html">個人資料</a></li>
                <li><a href="connect.html">聯絡我們</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="copyright-area">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <div class="copyright text-center">
              <p>&copy; LeisurePace</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <!-- footer 結束 -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/8.0.1/firebase-storage.js"></script>
  <script defer src="./js/init-firebase.js"></script>
</body>

</html>
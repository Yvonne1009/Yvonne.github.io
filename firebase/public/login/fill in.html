<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/fill in.css" />
    <link rel="icon" href="../image/logo.ico" type="image/x-icon" />
    <title>LeisurePace_個人資料填寫</title>
  </head>
  <body class="page6">
    <form id="healthForm">
      <div class="column">
        <!-- 表单字段 -->
        <label for="name">姓名:</label>
        <input type="text" id="name" name="name" required />

        <label for="birthday">生日:</label>
        <input type="date" id="birthday" name="birthday" required />

        <label>性别:</label>
        <label><input type="radio" name="gender" value="male" /> 男性</label>
        <label><input type="radio" name="gender" value="female" /> 女性</label>
        <label><input type="radio" name="gender" value="other" /> 其他</label>

        <label for="height">身高 (cm):</label>
        <input type="number" id="height" name="height" required />

        <label for="weight">體重 (kg):</label>
        <input type="number" id="weight" name="weight" required />

        <label>運動频率:</label>
        <select name="exerciseFrequency">
          <option value="daily">每天運動</option>
          <option value="weekly">一週 0 - 1 次</option>
          <option value="occasionally">一週 2 - 3 次</option>
          <option value="occasionally">一週 4 - 6 次</option>
        </select>
      </div>
      <button type="submit">提交</button>
    </form>

    <!-- 引入 Firebase App SDK（必须） -->
    <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-app.js"></script>

    <!-- 引入 Firestore SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-firestore.js"></script>

    <!-- 初始化 Firebase -->
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyCkMa2jz6kDse8j3BSsXYKru8LYA_Sb2M0",
        authDomain: "leisurepace-a3d51.firebaseapp.com",
        projectId: "leisurepace-a3d51",
        storageBucket: "leisurepace-a3d51.appspot.com",
        messagingSenderId: "955257567601",
        appId: "1:955257567601:web:2e06661d84707065fe9ed0",
      };

      // 初始化 Firebase 应用
      const app = firebase.initializeApp(firebaseConfig);
      // 初始化 Firestore 实例
      const db = firebase.firestore(app);
    </script>

    <script>
      // 表单提交处理代码
      const healthForm = document.getElementById("healthForm");

      healthForm.addEventListener("submit", function (event) {
        event.preventDefault(); // 阻止表单提交的默认行为

        const formData = new FormData(healthForm);
        const dataObject = {};

        formData.forEach(function (value, key) {
          dataObject[key] = value;
        });

        console.log("表单数据:", dataObject);

        // 将表单数据保存到 Firestore 的 'users_id' 集合中
        db.collection("users_id")
          .add(dataObject)
          .then((docRef) => {
            console.log("文档写入 ID: ", docRef.id);
            alert("数据已成功保存！");
          })
          .catch((error) => {
            console.error("添加文档时出错: ", error);
            alert("保存数据时出错，请重试！");
          });
      });
    </script>

    <!-- Import the basic jquery lib. -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  </body>
</html>

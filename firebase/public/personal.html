<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/personal.css" />
    <link rel="icon" href="image/logo.ico" type="image/x-icon" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      integrity="sha384-kB+HoBWE0e8+eAxj0NwD3wGwQ52cMUlw1U5NDzYrUSrWrjvaLq63fhp5R2+OOQ4b"
      crossorigin="anonymous"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-database.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <title>LeisurePace_個人資料</title>
  </head>

  <body>
    <!-- menu 開始 -->
    <header id="masthead" class="site-header" role="banner">
      <nav class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="container">
          <div class="navbar-header">
            <button
              type="button"
              class="navbar-toggle"
              data-toggle="collapse"
              data-target=".navbar-ex1-collapse"
            ></button>
            <a class="navbar-brand" href="index.html"> LeisurePace </a>
          </div>
          <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav navbar-right">
              <li><a href="index.html">首頁</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown"
                  >關於LeisurePace <i class="fa fa-angle-double-down"></i
                ></a>
                <ul class="dropdown-menu">
                  <li><a href="about.html">LeisurePace</a></li>
                  <li><a href="about.html">超慢跑介紹</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="./run/run180.html">超慢跑 </a>
              </li>
              <li class="dropdown">
                <a href="analyze.html">分析</a>
              </li>
              <li class="dropdown">
                <a href="task.html">任務 </a>
              </li>
              <li class="dropdown active">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <img
                    id="profileImage"
                    src="./image/default-avatar.png"
                    class="profile-picture"
                    style="border-radius: 50%"
                  />
                </a>

                <ul class="dropdown-menu">
                  <li><a href="bgstore.html">背景介紹</a></li>
                  <li><a href="personal.html">個人資料</a></li>
                  <li><a href="connect.html">聯絡我們</a></li>
                  <li><a href="./login/login.html">登出</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <!---------------- 表單---------------->
    <div class="main-content">
      <h2>我的檔案</h2>
      <p>管理你的檔案以保護你的帳戶</p>
      <form id="profileForm">
        <div class="form-group">
          <label for="username">使用者帳號</label>
          <input type="text" id="username" value="yvonne803" readonly />
        </div>
        <div class="form-group">
          <label for="name">姓名</label>
          <input type="text" id="name" value="Yvonne" required />
        </div>
        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" value="ch*******@gmail.com" required />
          <a href="em_chag.html" aria-label="Change email">變更</a>
        </div>
        <div class="form-group">
          <label for="phone">手機號碼</label>
          <input type="text" id="phone" value="*********80" required />
          <a href="ph_chag.html" aria-label="Change phone number">變更</a>
        </div>
        <div class="form-group">
          <label for="password">密碼</label>
          <input type="password" id="password" value="*********80" readonly />
          <a href="pwd_chag.html">變更</a>
        </div>
        <div class="form-group">
          <label>性別</label>
          <input type="radio" id="male" name="gender" value="male" />
          <label for="male">男性</label>
          <input
            type="radio"
            id="female"
            name="gender"
            value="female"
            checked
          />
          <label for="female">女性</label>
          <input type="radio" id="other" name="gender" value="other" />
          <label for="other">其他</label>
        </div>
        <div class="form-group">
          <label for="birthday">生日</label>
          <input type="date" id="birthday" name="birthday" required />
        </div>
        <button type="submit">儲存</button>
      </form>
    </div>

    <!------------------------------------下半部 footer 開始 --------------------------------------------------------->
    <footer id="footer" class="footer-area">
      <div class="footer-widget pt-80">
        <div class="container">
          <div class="row">
            <div class="col-lg-3 col-md-4 col-sm-8">
              <div class="footer-logo mt-50">
                <a href="#">
                  <img src="image/logo.png" alt="Logo" />
                </a>
                <ul class="footer-social mt-20">
                  <li>
                    <a href="#"><i class="lni-facebook-filled"></i></a>
                  </li>
                  <li>
                    <a href="#"><i class="lni-twitter-original"></i></a>
                  </li>
                  <li>
                    <a href="#"><i class="lni-google"></i></a>
                  </li>
                  <li>
                    <a href="#"><i class="lni-instagram"></i></a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6">
              <div class="footer-link mt-45">
                <div class="f-title">
                  <h4 class="title">關於LeisurePace</h4>
                </div>
                <ul class="mt-15">
                  <li><a href="about.html">LeisurePace</a></li>
                  <li><a href="about.html">超慢跑介紹</a></li>
                </ul>
              </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6">
              <div class="footer-link mt-45">
                <ul class="mt-15">
                  <li><a href="./run/run180.html">超慢跑</a></li>
                  <li><a href="analyze.html">分析</a></li>
                  <li><a href="task.html">任務</a></li>
                  <li><a href="bgstore.html">背景介紹</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="copyright-area">
        <div class="container">
          <div class="row">
            <div class="col-lg-12">
              <div class="copyright text-center">
                <p>&copy; LeisurePace</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!------------------------------------下半部JS --------------------------------------------------------->
    <script>
      // Firebase configuration
      var firebaseConfig = {
        apiKey: "AIzaSyCkMa2jz6kDse8j3BSsXYKru8LYA_Sb2M0",
        authDomain: "leisurepace-a3d51.firebaseapp.com",
        databaseURL: "https://leisurepace-a3d51-default-rtdb.firebaseio.com",
        projectId: "leisurepace-a3d51",
        storageBucket: "leisurepace-a3d51.appspot.com",
        messagingSenderId: "955257567601",
        appId: "1:955257567601:web:2e06661d84707065fe9ed0",
        measurementId: "G-MHZ967Y676",
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      const database = firebase.database(); // Realtime Database instance

      // Form submission event listener
      document
        .getElementById("profileForm")
        .addEventListener("submit", function (e) {
          e.preventDefault(); // Prevent form from refreshing the page

          // Get user input values
          const username = document.getElementById("username").value; // Disable input, may need to adjust
          const name = document.getElementById("name").value;
          const email = document.getElementById("email").value;
          const phone = document.getElementById("phone").value;
          const gender = document.querySelector(
            'input[name="gender"]:checked'
          ).value;
          const birthday = document.getElementById("birthday").value;

          // Check if all required fields are filled
          if (name && email && phone && birthday) {
            // Create a user object
            const userProfile = {
              name: name,
              email: email,
              phone: phone,
              gender: gender,
              birthday: birthday,
            };

            // Add or update user profile data in Realtime Database
            database
              .ref("users/" + username)
              .set(userProfile)
              .then(function () {
                alert("Profile updated successfully!");
              })
              .catch(function (error) {
                console.error("Error updating profile: ", error);
              });
          } else {
            alert("Please fill out all required fields.");
          }
        });
    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script
      defer
      src="https://www.gstatic.com/firebasejs/8.0.1/firebase-app.js"
    ></script>
    <script
      defer
      src="https://www.gstatic.com/firebasejs/8.0.1/firebase-auth.js"
    ></script>
    <script
      defer
      src="https://www.gstatic.com/firebasejs/8.0.1/firebase-storage.js"
    ></script>
    <script
      defer
      src="https://www.gstatic.com/firebasejs/8.0.1/firebase-database.js"
    ></script>
    <script defer src="./js/init-firebase.js"></script>
  </body>
</html>
